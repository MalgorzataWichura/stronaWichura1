{% extends "base.html" %}

{% block title %}Tw√≥j Koszyk{% endblock %}

{% block content %}
<div class="cart-wrapper">
    <h1>üõí Tw√≥j Koszyk</h1>

    {% if koszyk %}
    <table>
        <thead>
            <tr>
                <th>Produkt</th>
                <th>Cena</th>
                <th style="text-align: center;">Ilo≈õƒá</th>
                <th>Razem</th>
                <th>Akcja</th>
            </tr>
        </thead>
        <tbody>
            {% for klucz, item in koszyk.items %}
            <tr>
                <td><strong>{{ item.nazwa }}</strong></td>
                <td class="price">{{ item.cena }} z≈Ç</td>
                <td>
                    <div class="qty-control">
                        <a href="{% url 'zmniejsz_ilosc' klucz %}" class="btn-qty">-</a>
                        <span class="qty-number">{{ item.ilosc }}</span>
                        <a href="{% url 'zwieksz_ilosc' klucz %}" class="btn-qty">+</a>
                    </div>
                </td>
                <td class="price">{{ item.suma_produktu }} z≈Ç</td>
                <td>
                    <a href="{% url 'usun_z_koszyka' klucz %}" class="btn-remove">Usu≈Ñ ca≈Çkowicie</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="total-section">
        Suma ca≈Çkowita: <strong>{{ suma_calkowita }} z≈Ç</strong>
    </div>
    {% else %}
    <p>Tw√≥j koszyk jest obecnie pusty. Czas na zakupy!</p>
    {% endif %}

    <div style="margin-top: 30px; display: flex; gap: 20px;">
        <a href="{% url 'sklep' %}" class="btn-back">‚¨Ö Kontynuuj zakupy</a>
        <a href="{% url 'zestawienie_bio' %}" class="btn-back" style="color: #27ae60;">üåø Zobacz produkty BIO</a>
    </div>
</div>

<style>
    .cart-wrapper { 
        width: 100%;
        max-width: 900px; 
        background: white; 
        padding: 30px; 
        border-radius: 15px; 
        box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
    }
    
    h1 { color: #2c3e50; border-bottom: 2px solid #eee; padding-bottom: 15px; margin-top: 0; }
    
    table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    
    th { text-align: left; color: #7f8c8d; padding: 12px; border-bottom: 2px solid #f4f7f6; }
    
    td { padding: 15px; border-bottom: 1px solid #eee; vertical-align: middle; }
    
    .price { font-weight: bold; color: #27ae60; }

    /* Przyciski ilo≈õci */
    .qty-control {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        background: #f8f9fa;
        padding: 5px;
        border-radius: 8px;
        width: fit-content;
        margin: auto;
    }

    .btn-qty {
        display: inline-block;
        width: 28px;
        height: 28px;
        line-height: 28px;
        text-align: center;
        background: white;
        color: #2c3e50;
        text-decoration: none;
        border-radius: 5px;
        font-weight: bold;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        transition: 0.2s;
    }

    .btn-qty:hover {
        background: #2ecc71;
        color: white;
    }

    .qty-number {
        font-weight: bold;
        min-width: 20px;
        text-align: center;
    }

    .btn-remove { 
        color: #e74c3c; 
        text-decoration: none; 
        font-size: 0.85em;
        font-weight: bold;
    }
    
    .btn-remove:hover { text-decoration: underline; }

    .total-section { 
        text-align: right; 
        font-size: 1.5em; 
        margin-top: 20px;
        color: #2c3e50;
        border-top: 2px solid #f4f7f6;
        padding-top: 20px;
    }
    
    .btn-back { 
        text-decoration: none; 
        color: #3498db; 
        font-weight: bold;
        transition: 0.3s;
    }
    
    .btn-back:hover { color: #2980b9; }
</style>
{% endblock %}